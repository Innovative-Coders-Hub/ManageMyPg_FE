import{r as a,j as e}from"./index-DZruhiV_.js";import{P as f}from"./PageHeader-D4m0aPrs.js";function S(){const l=["ALL","POWER","PLUMBING","CLEANING","PARKING","FOOD"],d=["ALL","OPEN","ASSIGNED","COMPLETED"],g=[{id:1,category:"POWER",description:"No electricity in block B since 10 AM. Fuse might have blown.",image:null,status:"OPEN",createdBy:"Ravi Kumar",createdAt:"2025-11-13T09:12:00"},{id:2,category:"PLUMBING",description:"Leaking pipe outside flat 204, water pooling near stairs.",image:null,status:"ASSIGNED",createdBy:"Asha Devi",createdAt:"2025-11-12T17:45:00"},{id:3,category:"CLEANING",description:"Garbage not collected for 2 days at the west gate.",image:null,status:"COMPLETED",createdBy:"Suresh",createdAt:"2025-11-10T07:30:00"}],[y,N]=a.useState(g),[i,j]=a.useState("ALL"),[n,b]=a.useState("ALL"),[s,m]=a.useState(""),[c,o]=a.useState(null),p=()=>y.filter(t=>i==="ALL"||t.category===i).filter(t=>n==="ALL"||t.status===n).filter(t=>t.description.toLowerCase().includes(s.toLowerCase())||t.createdBy.toLowerCase().includes(s.toLowerCase())||String(t.id)===s).sort((t,x)=>new Date(x.createdAt)-new Date(t.createdAt)),u=t=>t==="OPEN"?"ASSIGNED":"COMPLETED";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(f,{title:"Complaints",subtitle:e.jsx("span",{className:"hidden sm:inline",children:"Search by id, text or reporter."}),children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 w-full sm:max-w-sm sm:justify-end",children:e.jsx("label",{className:"relative hidden sm:block w-full",children:e.jsx("input",{className:"border rounded px-3 py-2 w-full text-sm",placeholder:"Search by id, text or reporter",value:s,onChange:t=>m(t.target.value)})})})}),e.jsx("div",{className:"sm:hidden",children:e.jsx("input",{className:"border rounded px-3 py-2 w-full text-sm",placeholder:"Search by id, text or reporter",value:s,onChange:t=>m(t.target.value)})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("select",{className:"border rounded px-3 py-2",value:i,onChange:t=>j(t.target.value),children:l.map(t=>e.jsx("option",{children:t},t))}),e.jsx("select",{className:"border rounded px-3 py-2",value:n,onChange:t=>b(t.target.value),children:d.map(t=>e.jsx("option",{children:t},t))}),e.jsx("div",{className:"hidden lg:block"}),e.jsx("div",{className:"hidden lg:block"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:hidden",children:p().map(t=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold",children:["#",t.id," Â· ",t.category]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.createdAt).toLocaleString()})]}),e.jsx(h,{status:t.status})]}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:t.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Reported by: ",t.createdBy]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>o(t),className:"flex-1 border rounded py-1 text-sm",children:"View"}),t.status!=="COMPLETED"&&e.jsxs("button",{onClick:()=>N(x=>x.map(r=>r.id===t.id?{...r,status:u(r.status)}:r)),className:"flex-1 bg-indigo-600 text-white rounded py-1 text-sm",children:["Mark ",u(t.status)]})]})]},t.id))}),e.jsx("div",{className:"hidden lg:block bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:["ID","Category","Description","By","Created","Status","Actions"].map(t=>e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-600",children:t},t))})}),e.jsx("tbody",{className:"divide-y",children:p().map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:t.id}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:t.category}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-md truncate",children:t.description}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t.createdBy}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:new Date(t.createdAt).toLocaleString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(h,{status:t.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{className:"border px-3 py-1 rounded text-sm",onClick:()=>o(t),children:"View"})})]},t.id))})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-3",children:["Complaint #",c.id]}),e.jsx("p",{className:"text-sm text-gray-700 mb-4",children:c.description}),e.jsx("button",{className:"bg-gray-100 px-4 py-2 rounded",onClick:()=>o(null),children:"Close"})]})})]})}function h({status:l}){const d={OPEN:"bg-yellow-100 text-yellow-800",ASSIGNED:"bg-blue-100 text-blue-800",COMPLETED:"bg-green-100 text-green-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${d[l]}`,children:l})}export{S as default};
