import{r as o,u as A,j as e,x as P,y as S}from"./index-DZruhiV_.js";import{d as L}from"./dayjs.min-7h3eaHmg.js";function I(){const[a,i]=o.useState(null),[m,h]=o.useState(!0),[u,b]=o.useState(null),v=A();o.useEffect(()=>{async function s(){try{const r=localStorage.getItem("tenantId");if(!r)throw new Error("Tenant ID not found in localStorage");const g=await P(r);i(g.tenantDetails||g)}catch(r){console.error(r),b("Failed to load tenant details")}finally{h(!1)}}s()},[]);const p=async()=>{try{await S()}finally{localStorage.clear(),v("/signin",{replace:!0})}};if(m)return e.jsx("div",{className:"p-6",children:"Loading tenant dashboard..."});if(u)return e.jsx("div",{className:"p-6 text-red-600",children:u});if(!a)return e.jsx("div",{className:"p-6",children:"No tenant data found"});const c=a.rentResponse||[],l=a.address||{},N=c.reduce((s,r)=>s+(r.paidAmount||0),0),j=c[0]||{},f=j.advance||0,y=j.refundAmount||0,w=s=>s?s.replace(/\d(?=\d{4})/g,"*"):"N/A",D=s=>s?s.replace(new RegExp("(?<=.{2}).(?=.{2})","g"),"*"):"N/A";return e.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tenant Dashboard"}),e.jsx("button",{onClick:p,className:`\r
                px-4 py-2\r
                rounded-lg\r
                bg-red-500 text-white\r
                text-sm font-semibold\r
                hover:bg-red-600\r
                shadow\r
                whitespace-nowrap\r
                self-start\r
                `,children:"Logout"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ðŸ‘¤ Tenant Profile"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsx(t,{label:"Name",value:a.name}),e.jsx(t,{label:"Email",value:a.email}),e.jsx(t,{label:"Mobile",value:a.mobileNumber}),e.jsx(t,{label:"Aadhaar",value:w(a.aadhaarNumber)}),e.jsx(t,{label:"PAN",value:D(a.panNumber)}),e.jsx(t,{label:"Son Of",value:a.sonOf}),e.jsx(t,{label:"Age",value:a.age}),e.jsx(t,{label:"Qualification",value:a.qualification}),e.jsx(t,{label:"Company",value:a.workCompany}),e.jsx(t,{label:"Vehicle",value:a.vehicleNumber})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ðŸ  Stay Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsx(t,{label:"Joining Date",value:L(a.dateOfJoining).format("DD MMM YYYY")}),e.jsx(t,{label:"Vacate Date",value:a.dateOfVacate||"â€”"}),e.jsx(t,{label:"Bed ID",value:a.bedDetail}),e.jsx(t,{label:"Status",value:a.vacated?"Vacated":"Active"}),e.jsx(t,{label:"Monthly Rent",value:`â‚¹ ${a.monthlyRent}`})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ðŸ“ Address"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsx(t,{label:"Address Line",value:l.address}),e.jsx(t,{label:"Area / Locality",value:l.areaLocality}),e.jsx(t,{label:"Landmark",value:l.landmark}),e.jsx(t,{label:"City",value:l.city}),e.jsx(t,{label:"District",value:l.district}),e.jsx(t,{label:"State",value:l.state}),e.jsx(t,{label:"Pincode",value:l.pinCode}),e.jsx(t,{label:"Country",value:l.country})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(x,{title:"Total Paid",value:N}),e.jsx(x,{title:"Advance",value:f}),e.jsx(x,{title:"Refund",value:y}),e.jsx(x,{title:"Months",value:`${c.length} months`,type:"count"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 sm:p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"ðŸ’° Payment History"}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx(n,{children:"Month"}),e.jsx(n,{children:"Rent"}),e.jsx(n,{children:"Paid"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Mode"}),e.jsx(n,{children:"Due Date"}),e.jsx(n,{children:"Paid Date"}),e.jsx(n,{children:"Late Fee"})]})}),e.jsx("tbody",{children:c.map(s=>e.jsxs("tr",{className:"border-t text-center",children:[e.jsx(d,{children:s.rentMonth}),e.jsxs(d,{children:["â‚¹",s.rentAmount]}),e.jsxs(d,{children:["â‚¹",s.paidAmount]}),e.jsx(d,{children:e.jsx("span",{className:`px-2 py-1 rounded text-xs 
                            ${s.status==="PAID"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.status})}),e.jsx(d,{children:s.modeOfPayment}),e.jsx(d,{children:s.dueDate}),e.jsx(d,{children:s.paidDate||"â€”"}),e.jsxs(d,{children:["â‚¹",s.lateFee]})]},s.id))})]})}),e.jsx("div",{className:"space-y-3 md:hidden",children:c.map(s=>e.jsxs("div",{className:"border rounded-lg p-3 text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:s.rentMonth}),e.jsx("span",{className:`text-xs px-2 py-1 rounded 
                        ${s.status==="PAID"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.status})]}),e.jsxs("div",{children:["Rent: â‚¹",s.rentAmount]}),e.jsxs("div",{children:["Paid: â‚¹",s.paidAmount]}),e.jsxs("div",{children:["Pending: â‚¹",Number(s.pending||0).toFixed(2)]}),e.jsxs("div",{children:["Mode: ",s.modeOfPayment]}),e.jsxs("div",{children:["Due: ",s.dueDate]}),e.jsxs("div",{children:["Paid On: ",s.paidDate||"â€”"]}),e.jsxs("div",{children:["Late Fee: â‚¹",s.lateFee]})]},s.id))})]})]})}const t=({label:a,value:i})=>e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:a}),e.jsx("div",{className:"font-medium",children:i||"â€”"})]}),x=({title:a,value:i,type:m="money"})=>{const h=m==="money"?`â‚¹ ${Number(i||0).toLocaleString("en-IN")}`:i;return e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 text-center",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:a}),e.jsx("div",{className:"text-xl font-semibold",children:h})]})},n=({children:a})=>e.jsx("th",{className:"px-3 py-2 border",children:a}),d=({children:a})=>e.jsx("td",{className:"px-3 py-2 border",children:a});export{I as default};
