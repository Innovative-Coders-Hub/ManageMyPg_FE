const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OwnersByCityChart-B-mq7k8l.js","assets/index-DZruhiV_.js","assets/index-jKoiuzrI.css","assets/BarChart-Br6Sxyk8.js","assets/OwnersByStateChart-C8aZ5B1U.js"])))=>i.map(i=>d[i]);
import{g as A,u as B,r as i,j as e,_ as C}from"./index-DZruhiV_.js";import{d as w}from"./dayjs.min-7h3eaHmg.js";import{s as P}from"./sampleData-CzbAm5hk.js";import{P as _}from"./PageHeader-D4m0aPrs.js";var y={exports:{}},E=y.exports,N;function S(){return N||(N=1,(function(o,s){(function(d,a){o.exports=a()})(E,(function(){return function(d,a,c){a.prototype.isBetween=function(u,v,n,g){var l=c(u),m=c(v),x=(g=g||"()")[0]==="(",f=g[1]===")";return(x?this.isAfter(l,n):!this.isBefore(l,n))&&(f?this.isBefore(m,n):!this.isAfter(m,n))||(x?this.isBefore(l,n):!this.isAfter(l,n))&&(f?this.isAfter(m,n):!this.isBefore(m,n))}}}))})(y)),y.exports}var k=S();const O=A(k);w.extend(O);const L=i.lazy(()=>C(()=>import("./OwnersByCityChart-B-mq7k8l.js"),__vite__mapDeps([0,1,2,3])));i.lazy(()=>C(()=>import("./OwnersByStateChart-C8aZ5B1U.js"),__vite__mapDeps([4,1,2,3])));const $=(o,s)=>s?Math.round((o-s)/s*100):100;function b({title:o,value:s,subtitle:d,growth:a,onClick:c}){return e.jsxs("div",{onClick:c,className:`rounded-xl border p-4 bg-white border-gray-200 transition ${c?"cursor-pointer hover:shadow-md":""}`,children:[e.jsx("div",{className:"text-sm text-gray-500",children:o}),e.jsx("div",{className:"mt-2 text-3xl font-bold text-gray-900",children:s}),e.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-400",children:d}),a!==void 0&&e.jsxs("span",{className:`text-xs font-semibold ${a>=0?"text-green-600":"text-red-600"}`,children:[a>=0?"+":"",a,"%"]})]})]})}function q(){const o=B(),s=P.owners||[],d=10,[a,c]=i.useState(1),[u,v]=i.useState(""),[n,g]=i.useState("all"),l=i.useMemo(()=>{const r=w().startOf("month"),h=r.subtract(1,"month"),j=s.filter(p=>w(p.registeredAt).isAfter(r)).length,M=s.filter(p=>w(p.registeredAt).isBetween(h,r)).length;return{total:s.length,approved:s.filter(p=>p.status==="approved").length,pending:s.filter(p=>p.status==="pending").length,currentMonth:j,growth:$(j,M)}},[s]),m=i.useMemo(()=>{const t={};return s.forEach(r=>t[r.city]=(t[r.city]||0)+1),Object.entries(t).map(([r,h])=>({city:r,count:h}))},[s]);i.useMemo(()=>{const t={};return s.forEach(r=>t[r.state]=(t[r.state]||0)+1),Object.entries(t).map(([r,h])=>({state:r,count:h}))},[s]);const x=i.useMemo(()=>s.filter(t=>{const r=u.toLowerCase(),h=(t.name||"").toLowerCase().includes(r)||(t.email||"").toLowerCase().includes(r)||(t.city||"").toLowerCase().includes(r),j=n==="all"||t.status===n;return h&&j}),[s,u,n]);i.useEffect(()=>{const t=Math.max(1,Math.ceil(x.length/d));a>t&&c(1)},[x.length]);const f=x.slice((a-1)*d,a*d);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(_,{title:"Admin Dashboard",subtitle:"ManageMyPg analytics & control"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(b,{title:"Total Owners",value:l.total}),e.jsx(b,{title:"Approved",value:l.approved,onClick:()=>o("/admin/owners?filter=approved")}),e.jsx(b,{title:"Pending",value:l.pending,onClick:()=>o("/admin/owners?filter=pending")}),e.jsx(b,{title:"This Month",value:l.currentMonth,subtitle:"MoM growth",growth:l.growth})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Owners by City"}),e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"h-[250px] flex items-center justify-center text-sm text-gray-400",children:"Loading chart…"}),children:e.jsx(L,{data:m})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsx("input",{placeholder:"Search owners…",value:u,onChange:t=>v(t.target.value),className:"px-3 py-2 border rounded w-64 bg-white border-gray-200"}),e.jsxs("select",{value:n,onChange:t=>g(t.target.value),className:"px-3 py-2 border rounded bg-white border-gray-200",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm table-auto",children:[e.jsx("thead",{className:"bg-indigo-50",children:e.jsxs("tr",{className:"text-indigo-700",children:[e.jsx("th",{className:"text-left py-2 px-3 w-2/5 text-xs font-semibold uppercase tracking-wide",children:"Name"}),e.jsx("th",{className:"text-left py-2 px-3 w-2/5 text-xs font-semibold uppercase tracking-wide",children:"Email"}),e.jsx("th",{className:"text-left py-2 px-3 w-1/5 text-xs font-semibold uppercase tracking-wide",children:"City"}),e.jsx("th",{className:"text-right py-2 px-3 w-1/5 text-xs font-semibold uppercase tracking-wide",children:"Status"})]})}),e.jsxs("tbody",{children:[f.map(t=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 cursor-pointer",onClick:()=>o(`/admin/owner/${t.id}`),children:[e.jsx("td",{className:"py-3 px-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-700 flex-shrink-0 flex items-center justify-center font-semibold",children:(t.name||"").split(" ").map(r=>r?.[0]||"").join("").slice(0,2).toUpperCase()}),e.jsx("div",{className:"min-w-0",children:e.jsx("div",{className:"font-medium truncate",children:t.name})})]})}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("div",{className:"text-gray-500 text-xs truncate max-w-[200px]",children:t.email})}),e.jsx("td",{className:"py-3 px-3 text-sm",children:t.city}),e.jsx("td",{className:"py-3 px-3 text-right",children:e.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs ${t.status==="approved"?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"}`,children:t.status})})]},t.id)),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-6 text-center text-gray-500",children:"No owners found."})})]})]})}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx("button",{disabled:a===1,onClick:()=>c(t=>t-1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),e.jsx("button",{disabled:a*d>=x.length,onClick:()=>c(t=>t+1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})}export{q as default};
