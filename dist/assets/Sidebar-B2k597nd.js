import{r as n,R as T,j as e,u as V,N as P,y as B,h as U}from"./index-DZruhiV_.js";const H=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,l)=>l?l.toUpperCase():a.toLowerCase()),_=t=>{const s=W(t);return s.charAt(0).toUpperCase()+s.slice(1)},E=(...t)=>t.filter((s,a,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===a).join(" ").trim(),q=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};var D={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const J=n.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:c="",children:r,iconNode:y,...g},u)=>n.createElement("svg",{ref:u,...D,width:s,height:s,stroke:t,strokeWidth:l?Number(a)*24/Number(s):a,className:E("lucide",c),...!r&&!q(g)&&{"aria-hidden":"true"},...g},[...y.map(([f,k])=>n.createElement(f,k)),...Array.isArray(r)?r:[r]]));const h=(t,s)=>{const a=n.forwardRef(({className:l,...c},r)=>n.createElement(J,{ref:r,iconNode:s,className:E(`lucide-${H(_(t))}`,`lucide-${t}`,l),...c}));return a.displayName=_(t),a};const Z=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],F=h("building-2",Z);const K=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Q=h("chart-column",K);const X=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Y=h("credit-card",X);const ee=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],te=h("layout-dashboard",ee);const se=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ae=h("shield",se);const ne=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],re=h("tag",ne);const oe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ie=h("users",oe);function le({open:t,title:s="Confirm action",message:a,confirmText:l="Confirm",cancelText:c="Cancel",loading:r=!1,onConfirm:y,onCancel:g}){return T.useEffect(()=>{if(!t)return;const u=f=>{f.key==="Escape"&&g()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[t,g]),t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:g}),e.jsxs("div",{className:"relative z-10 w-full max-w-sm rounded-2xl bg-white shadow-xl p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:s}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:a}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:g,disabled:r,className:"px-4 py-2 text-sm rounded-lg border hover:bg-gray-50 disabled:opacity-60",children:c}),e.jsx("button",{onClick:y,disabled:r,className:"px-4 py-2 text-sm rounded-lg bg-red-600 text-white font-semibold hover:bg-red-700 disabled:opacity-60",children:r?"Logging out…":l})]})]})]}):null}const I=[{to:"/home",label:"Dashboard",icon:te},{to:"/my-pgs",label:"My PGs",icon:F},{to:"/tenants",label:"Tenants",icon:ie},{to:"/offers",label:"Offers",icon:re},{to:"/complaints",label:"Complaints",icon:Y},{to:"/reports",label:"Reports",icon:Q},{to:"/admin/dashboard",label:"Admin",icon:ae,adminOnly:!0}],m=(...t)=>t.filter(Boolean).join(" ");function de({collapsed:t,setCollapsed:s,mobileOpen:a,setMobileOpen:l}){const c=V(),[r,y]=n.useState(()=>{try{return JSON.parse(localStorage.getItem("sidebar_collapsed"))??!1}catch{return!1}}),[g,u]=n.useState(!1),[f,k]=n.useState(!1),[$,w]=n.useState(!1),[v,S]=n.useState([]),[p,L]=n.useState(!1),[A,b]=n.useState(!1),[z,G]=n.useState(()=>localStorage.getItem("businessName")),d=typeof t=="boolean"?t:r,R=s??(o=>{y(o),localStorage.setItem("sidebar_collapsed",JSON.stringify(o))}),j=typeof a=="boolean"?a:f,N=l??k;return n.useEffect(()=>{(async()=>{try{L(!0);const x=await U();S(Array.isArray(x)?x:[])}catch{S([])}finally{L(!1)}})()},[]),n.useEffect(()=>{window.innerWidth>=768&&j&&N(!1)},[j,N]),n.useEffect(()=>{const o=localStorage.getItem("businessName");G(o)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:m("fixed inset-0 bg-black/40 z-40 md:hidden transition-opacity",j?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>N(!1)}),e.jsxs("aside",{className:m("hidden md:flex flex-col bg-white border-r shadow-sm transition-all duration-300 ease-in-out",d?"w-20":"w-72","sticky top-0 h-screen"),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[!d&&e.jsx("span",{className:"text-lg font-bold tracking-tight",children:z?.trim()||"ManageMyPg"}),e.jsx("button",{onClick:()=>R(!d),className:"p-2 rounded-md hover:bg-gray-100","aria-label":"Toggle sidebar",children:"☰"})]}),e.jsx("nav",{className:"flex-1 px-2 space-y-1 overflow-visible",children:I.map(({to:o,label:x,icon:C,adminOnly:M})=>M&&localStorage.getItem("isAdmin")!=="true"?null:e.jsxs("div",{children:[e.jsxs(P,{to:o,className:({isActive:i})=>m("relative group flex items-center gap-3 rounded-md px-3 py-2 transition-all",d?"justify-center":"justify-start",i?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-50"),onClick:()=>{b(o==="/tenants"?i=>!i:!1)},children:[e.jsx("span",{className:m("absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r bg-indigo-600","opacity-0 group-[.active]:opacity-100")}),e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-md bg-gray-100",children:e.jsx(C,{size:20})}),!d&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:x})]}),o==="/tenants"&&!d&&A&&e.jsxs("div",{className:"ml-14 mt-1 space-y-1 border-l border-gray-200 pl-3 w-[calc(100%-3.5rem)] relative z-10 bg-white",children:[p&&e.jsx("div",{className:"text-xs text-gray-400 px-2",children:"Loading PGs..."}),!p&&v.map(i=>e.jsx("button",{onClick:()=>{c(`/tenants?pgId=${i.id}`),b(!1)},className:`\r
                          w-full text-left text-sm\r
                          px-3 py-2 rounded-md\r
                          text-gray-800\r
                          bg-white indicating\r
                          hover:bg-indigo-50 hover:text-indigo-700\r
                          transition\r
                        `,children:i.pgName},i.id)),!p&&v.length===0&&e.jsx("div",{className:"text-xs text-gray-400 px-2",children:"No PGs found"})]})]},o))}),e.jsx(O,{collapsed:d,onLogoutClick:()=>w(!0)})]}),e.jsxs("aside",{className:m("fixed left-0 top-0 bottom-0 z-50 w-72 bg-white shadow-xl md:hidden transition-transform",j?"translate-x-0":"-translate-x-full"),children:[e.jsx("div",{className:"px-4 py-4 border-b font-bold",children:"ManageMyPg"}),e.jsx("nav",{className:"px-3 py-4 space-y-2",children:I.map(({to:o,label:x,icon:C,adminOnly:M})=>M&&localStorage.getItem("isAdmin")!=="true"?null:e.jsxs("div",{children:[e.jsxs(P,{to:o,className:({isActive:i})=>m("relative group flex items-center gap-3 rounded-md px-3 py-2 transition-all",d?"justify-center":"justify-start",i?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-50"),onClick:()=>{b(o==="/tenants"?i=>!i:!1)},children:[e.jsx("span",{className:m("absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 rounded-r bg-indigo-600","opacity-0 group-[.active]:opacity-100")}),e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-md bg-gray-100",children:e.jsx(C,{size:20})}),!d&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:x})]}),o==="/tenants"&&!d&&A&&e.jsxs("div",{className:"ml-14 mt-1 space-y-1 border-l border-gray-200 pl-3 w-[calc(100%-3.5rem)] relative z-10 bg-white",children:[p&&e.jsx("div",{className:"text-xs text-gray-400 px-2",children:"Loading PGs..."}),!p&&v.map(i=>e.jsx("button",{onClick:()=>c(`/tenants?pgId=${i.id}`),className:`\r
                          w-full text-left text-sm\r
                          px-3 py-2 rounded-md\r
                          text-gray-800\r
                          bg-white indicating\r
                          hover:bg-indigo-50 hover:text-indigo-700\r
                          transition\r
                        `,children:i.pgName},i.id)),!p&&v.length===0&&e.jsx("div",{className:"text-xs text-gray-400 px-2",children:"No PGs found"})]})]},o))}),e.jsx("div",{className:"border-t px-3 py-3",children:e.jsx(O,{mobile:!0,onLogoutClick:()=>{w(!0),N(!1)}})})]}),e.jsx(le,{open:$,title:"Logout",message:"Are you sure you want to logout?",confirmText:"Logout",loading:g,onCancel:()=>w(!1),onConfirm:async()=>{u(!0);try{await B()}finally{localStorage.clear(),window.location.replace("/signin"),u(!1),w(!1)}}})]})}function O({collapsed:t,mobile:s,onLogoutClick:a}){const l=typeof window<"u"?localStorage.getItem("fullName"):null,c=typeof window<"u"?localStorage.getItem("username"):null,r=l||c||"PG Owner";return e.jsxs("div",{className:m("flex items-center gap-3 px-3 py-3 hover:bg-gray-50 cursor-pointer",t&&!s?"justify-center":"justify-start"),children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center font-semibold",children:r.charAt(0).toUpperCase()}),(!t||s)&&e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold",children:r}),e.jsx("button",{onClick:a,className:"flex items-center gap-1 text-xs text-gray-500 mt-0.5 hover:text-red-600","aria-label":"Logout",type:"button",children:"Logout"})]})]})}export{de as default};
